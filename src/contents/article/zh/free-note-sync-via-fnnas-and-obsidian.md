---
title: Obsidian x 飞牛 NAS：打造免费的跨平台笔记同步与备份方案
desc: 从 2019.08.01 重新开始写日记，到今天居然坚持了 6 年了，一开始是记录在一款云笔记 App 上，直到四个月前陆陆续续把数据迁移到自己家里的 NAS ，把数据爬回来才发现居然接近 8 GB …… 一直觉得好像都是文字为主，没想到也配了不少图片，重新看的时候生活还挺丰富多彩的哈哈哈！
keywords: NAS,飞牛NAS,fnOS,Obsidian,Note sync,Note backup,Obsidian sync,Obsidian backup,Obsidian WebDAV
date: 2025-10-08 23:42:03
cover: https://cdn.chengpeiquan.com/img/2025/07/202507130003907.jpg?x-oss-process=image/interlace,1
categories:
  - tech
---

从 2019.08.01 重新开始写日记，到今天居然坚持了 6 年了，一开始是记录在一款云笔记 App 上，直到四个月前陆陆续续把数据迁移到自己家里的 NAS ，把数据爬回来才发现居然接近 8 GB …… 一直觉得好像都是文字为主，没想到也配了不少图片，重新看的时候生活还挺丰富多彩的哈哈哈！

这里的日记就很纯粹的记录生活，不是什么读书笔记、技术笔记等等，那一类的记录对我来说都属于生活之外的事情，冷冰冰没有个人感情，生活日记记录了我每一段生活的喜怒哀乐，还有各种胡思乱想，闲着无聊的时候翻一翻，能够回顾自己过往的生活和成长，别有一番乐趣。

![哈哈哈很多都是跟猫生活的美好瞬间](https://cdn.chengpeiquan.com/img/2025/10/202510082103234.jpg?x-oss-process=image/interlace,1)

## 早期的方案

2019 年重新开始写日记那会，我当时的需求主要是晚上睡觉前用手机记录当天的日记，并且有网页版或者桌面客户端可以平时在电脑上看一看稍微管理一下就足够，但那个时候还没什么特别流行的跨平台笔记方案，而且大部分流行的笔记 App 都是广告很多。

加上当时还没有开始接触 NAS ，也没有选择自建存储的想法，后面选择了一款界面比较清爽、自我感觉用户体量比较小的 App（猜的…… ），由于那家公司本职不是做这个笔记 App 产品，所以对 App 利益相关的运营干涉不是太多，所以 “清爽的体验” 一用就这么用了五年多。

但随着长时间深入使用，这也变成了我不想用它的原因，由于 App 不够被重视，以至于多年未维护更新，产生的 BUG 也没有修复，一度让我自己想抽空做一个客户端自己用（根据它的 BUG 表现推测是比较老版本的 React Native 做的）。

![这款 App 的用户体验让我越来越难以忍受](https://cdn.chengpeiquan.com/img/2025/08/202508172109712.jpg?x-oss-process=image/interlace,1)

## 新的迁移方案

不过由于工作太忙， “做一个情怀客户端自己用” 这个事情也就一直放着，可以看到我是 23 年开的 Project ，直到现在都没动哈哈哈。

不过拖延症有拖延症的好处，因为这几年陆陆续续听到 Obsidian 、 Logseq 、 Joplin 、 Notion ，以及国产的为知笔记、思源笔记，以及语雀、飞书文档这一类不太纯笔记但也提供了很优秀的笔记功能的产品，有这么多现成的，干嘛还自己搞呢？

而且在开 Project 的那段时间，也开始玩起了 NAS （详见 [我的第一台 NAS](/article/my-custom-nas) 一文），玩熟悉之后，用 NAS 来存储这些相对敏感的数据，应该说是最好的选择了。

## 迁移之前的考虑

有了数据迁移的想法，先梳理看看自己都需要些啥功能。

### 明确自己的需求

在现阶段，用 NAS 作为数据存储是已经确定的事情，剩下的不确定因素主要还是客户端方案的选择。

|    需求点    | 说明                                                                                                   |
| :----------: | :----------------------------------------------------------------------------------------------------- |
|  私有化部署  | 考虑到自己当前的需求主要是个人日记，偏隐私，我选择将数据存放到我的 NAS 上                              |
| 多平台客户端 | 我自己主要设备是需要有 iOS App 和 macOS App (或者 Web )                                                |
| 客户端响应快 | 不论是启动速度，还是搜索速度，因为写了 6 年，几千篇笔记，速度方面还是有要求的                          |
|  交互体验好  | 想换掉之前的方案就是因为体验太差了，至少不能再有我上面提到的那些问题                                   |
|  界面颜值高  | 我当时选那个 App 的原因就是清爽，虽然没有暗模式，但亮模式的 UI 很像 [Shadcn UI](https://ui.shadcn.com) |
|   多端同步   | 最重要的功能，可以直接与我的 NAS 进行数据传输                                                          |

### 客户端之间的选择

支持私有部署的 “单机笔记” 方面，主流的就是 Obsidian 、 Logseq 、 Joplin 、为知笔记、思源笔记 这几款。

基于社区评价、私有化部署的内存占用（ NAS 比较重视）、客户端颜值等维度对比后，就剩下 Obsidian 和 Logseq 两者， Logseq 是比 Obsidian 要晚一点推出的产品，所以它具备了 OB 的一些优点，同时还具有双向链接、块引用等更现代化的功能。

不过社区普遍认为 Logseq 在处理大量笔记时性能稍弱一些，而它基于大纲的组织方式，对我目前以 “日记” 为主的使用场景来说略显复杂。

未来如果要记录其他类型的内容，我可能会选择 Logseq 来做区分，但目前还是选了更为经典的 Obsidian 。

## 目前的方案

接下来讲讲我目前确定下来的具体架构和配置。

### 多端同步架构

经过前面的方案对比之后，我的笔记方案整体架构非常简单。

- NAS 作为数据存储中心，并通过自带的 WebDAV 服务对外同步
- 多端则使用 Obsidian 官方提供的桌面和手机客户端，配好对应的同步功能即可和 NAS 进行数据对接

![以 NAS 为中心的架构图](https://cdn.chengpeiquan.com/img/2025/10/202510040114662.jpg?x-oss-process=image/interlace,1)

在同步方案的选择上，基于 NAS ，就毫无悬念选 WebDAV 了：

- ✅ 数据完全私有，不依赖第三方服务
- ✅ 局域网内同步速度极快，也可以配合 DDNS 或内网穿透实现外网访问
- ✅ 理论上无限容量，无需额外的订阅成本（硬盘成本算到 NAS 的购买成本里了）
- ✅ Obsidian 有对应的插件支持 WebDAV

### 其他方案对比

不过 Obsidian 也有其他的同步方案，这里也顺便记录下查过的方案对比，供参考：

|       方案        | 优点                                       | 缺点                                                                                                       |
| :---------------: | :----------------------------------------- | :--------------------------------------------------------------------------------------------------------- |
| **Obsidian Sync** | 官方方案，稳定可靠                         | 需要订阅，最低 $4 / 月，并且限制 1 GB 上限，单个文件不能超过 5 MB                                          |
| **iCloud Drive**  | 苹果生态无缝集成，有基础的免费容量         | 真正用起来的话需要订阅，最低 ￥6 / 月可以达到 50 GB ，否则只有 5 GB 可用，另外注意这些方便服务仅限苹果设备 |
|     **网盘**      | 主流云盘，稳定，有基础的免费容量           | 免费版速度慢，容量小，也是需要订阅提升体验，但依然有容量限制、文件大小限制                                 |
|   **Git 同步**    | 免费，版本控制强大，文本 Diff 对比速度快   | 配置复杂，不适合非技术用户；仅对纯文本友好，不适合托管图片、视频多的笔记内容                               |
| **WebDAV (NAS)**  | 服务免费，内置服务开箱即用，局域网速度超快 | 需要 NAS 设备（一次性硬件投入）                                                                            |

### 飞牛同步客户端

在这里还要提及一个特别的同步方案，那就是飞牛同步，支持 Windows 和 macOS 平台。

飞牛同步的优势在于：

- ✅ 飞牛官方团队维护，与飞牛 NAS 深度集成
- ✅ 配置相对简单，对非技术用户更友好
- ✅ 针对飞牛 NAS 优化，同步性能可能更好

可以在官网下载 [飞牛同步客户端](https://www.fnnas.com/download?key=fn-sync-client&utm=chengpeiquan.com) 。

![飞牛同步客户端登录界面](https://cdn.chengpeiquan.com/img/2025/10/202510130102237.jpg?x-oss-process=image/interlace,1)

不过目前飞牛同步还只有 PC 版本，还没有移动端版本支持。对于我这种需要在 iPhone 上记录日记的场景，WebDAV 方案配合 Obsidian App 是更合适的选择。

但如果你的主要使用场景是桌面端同步文件（不限于 Obsidian ），或者希望有更简单的配置流程，飞牛同步也是一个值得考虑的选择。

## 使用体验

先说说目前方案的使用体验吧，如果你觉得这套方式也适合自己，再继续往下看配置部分。

### 旧数据迁移

我之前用的那个笔记 App 不支持导出数据，所以我是通过 DevTools 查看它的 API 请求过程，写了个爬虫把笔记内容爬了回来。

对方的 API 返回的是 HTML ，因此本地又编写了一个 HTML 转 Markdown 的工具进行格式转换（推荐 [Remark](https://github.com/remarkjs) 系列工具包）。

笔记中的图片原本也是远程 URL ，我在爬取时一并下载到本地，并按日期文件夹归档，再将笔记里的引用路径改成相对路径指向本地图片，当然这些工作也是用脚本处理的。

具体细节这里就不展开了，前端同学对这种流程应该不陌生，而且爬虫这东西也不太方便公开细说。

### 使用感受

写这篇博客时，我已经迁移到 Obsidian + 飞牛 NAS 四个月了，总体体验可以说是非常满意：

**优点：**

- ✅ **速度快**：局域网同步几乎是秒传，搜索 2000+ 笔记也很流畅
- ✅ **稳定性好**：至今未出现同步失败或数据丢失
- ✅ **界面清爽**：Obsidian 的界面简洁干净，用起来非常舒适
- ✅ **插件丰富**：几乎所有功能都有对应插件支持自定义
- ✅ **数据安全**：可以只在局域网内同步，数据不出网更安全
- ✅ **备份方便**：在 NAS 端还可以通过 “文件备份” 功能自动备份到其他存储位置

**需要注意的点：**

- ⚠️ **初次配置有门槛**：NAS 端配置简单，但 Obsidian 的客户端选项较多，需要点时间摸索
- ⚠️ **外网访问速度**：若 NAS 没有公网 IP ，使用 FN Connect 免费版的访问速度可能偏慢（可考虑付费版）
- ⚠️ **移动端容量**：Obsidian 是本地化编辑器，所有文件都会存储在设备上，需确保手机空间充足
- ⚠️ **预防同步冲突**：多设备同时编辑时，仍需留意冲突问题

## 多端同步配置

接下来讲讲怎么围绕 NAS 这个数据中心实现多端同步，主要以飞牛 NAS 端，以及 Obsidian 桌面客户端，先把流程跑通了，在 Obsidian App 的设置也是一样的。

### 飞牛 NAS 配置

下面的配置步骤都是以 Web 端的操作为例，在飞牛的 App 操作也是类似，按顺序操作即可，需要注意的是，请使用管理员账号 **登录飞牛 NAS** ，而不要使用普通账号，很多操作需要管理员才可以设置。

#### 创建笔记存储目录

建议在 “文件管理” 中创建一个专门的文件夹，作为数据的存储根目录，比如 `database` ，这样其他类似的数据托管都可以存档在该文件夹里。

真正存放数据的地方，可以根据需要再建一层目录，例如我的日记是放在 `database` 的 `diary` 下。

> 重要数据建议存放在一个有数据保护的存储空间下，预算不高的话可以像我一样，用两块 2TB 的硬盘创建一个 RAID 1 。

![创建数据根目录](https://cdn.chengpeiquan.com/img/2025/10/202510062119261.jpg?x-oss-process=image/interlace,1)

#### 配置 WebDAV 服务

飞牛 NAS 自带 WebDAV 服务，访问 **“系统设置 → 文件共享协议 → WebDAV ”** ，启用服务。默认的 HTTP 端口号 5005 / HTTPS 端口号 5006 可以直接使用，也可以自行修改。

再点击 WebDAV 界面上的 “设置可见文件夹范围” ，设置允许通过 WebDAV 访问的目录范围，根据自己的需要去限制范围，记得包含刚才的数据文件夹就行。

> 在 NAS 的 WebDAV 配置界面上，可以看到自己的访问地址是
>
> - `http://{你的 NAS 内网 IP}:{端口号}/`
> - `http://{你的 NAS 域名}:{端口号}/`
>
> 注意，使用 HTTP 或 HTTPS 时，两者的端口号是不一样的

如果需要使用域名访问 WebDAV ，可以在 **“系统设置 → 远程访问”** 管理 FN Connect 账号，或者在 DDNS 配置域名，具体在这里不过多介绍，飞牛的界面操作还是很清晰的。

![系统设置 - 文件共享协议 - WebDAV](https://cdn.chengpeiquan.com/img/2025/10/202510060101116.jpg?x-oss-process=image/interlace,1)

### Obsidian 桌面客户端配置

在 Obsidian 中，根据最流行的免费同步方案，使用了 [Remotely Save](https://github.com/remotely-save/remotely-save) ，另外为了统一处理 Markdown 的内嵌文件路径（图片、视频等）的存放位置，我同时使用了 [Custom Attachment Location](https://github.com/RainCat1998/obsidian-custom-attachment-location) 插件。

#### 仓库与日记设置

启动 Obsidian 后会引导创建一个笔记仓库，其实就是在电脑里选择一个文件夹存档这些笔记，所选的文件夹对于这个仓库来说也是一个根目录的概念。

如果和我一样是用来写日记的，或者是想类似日记一样在同一个文件夹里存档笔记，并且有自己的固定笔记模板，那么可以在 “日记” 设置一些存档规则，例如我选择了将所有日记都归类到 `docs` 文件夹，而日记模板则归类在 `template` 文件夹下（模版需要具体到某一个文件的路径）。

![在 Obsidian 的日记设置界面，以及 Mac 对应的目录和文件](https://cdn.chengpeiquan.com/img/2025/10/202510072232099.jpg?x-oss-process=image/interlace,1)

#### 内部链接设置

Obsidian 对 Markdown 的链接和图片引用默认是它自己的语法，为了以后兼容其他客户端，建议这里也改成 “基于当前笔记的相对路径” 。

![将内部链接规则修改为 ”基于当前笔记的相对路径“](https://cdn.chengpeiquan.com/img/2025/10/202510072303736.jpg?x-oss-process=image/interlace,1)

#### 安装插件

插件好像都是从 GitHub 安装的，所以需要确保所处的网络环境可以顺利打开 GitHub 。

1. 打开 Obsidian 设置 → 第三方插件 → 关闭 “安全模式”
2. 点击「浏览」搜索 `Remotely Save` （必要）和 `Custom Attachment Location`（可选）
3. 安装对应的插件并启用

#### 同步插件配置

同步插件是核心插件，使用的是 [Remotely Save](https://github.com/remotely-save/remotely-save) ，这里有几项需要设置：

|   设置项   | 如何设置                                                                                         |
| :--------: | :----------------------------------------------------------------------------------------------- |
|  远程服务  | 选择 WebDAV                                                                                      |
| 服务器地址 | 从飞牛 NAS 复制 WebDAV 的访问地址，拼接数据库文件夹路径，例如 `http://192.168.8.8:5005/database` |
|   用户名   | 飞牛 NAS 里，这个 `database` 文件夹的归属账号的用户名                                            |
|    密码    | 飞牛 NAS 里，这个 `database` 文件夹的归属账号的密码                                              |
|   并行度   | 由于我只使用局域网同步，所以我开到了最大，目前可以设置 `20`                                      |

其他的就根据实际需要调整，或者保持默认就可以了。

![Remotely Save](https://cdn.chengpeiquan.com/img/2025/10/202510070232761.jpg?x-oss-process=image/interlace,1)

#### 附件插件配置

辅助插件目前只用了一个附件管理的 [Custom Attachment Location](https://github.com/RainCat1998/obsidian-custom-attachment-location) ，从前面的仓库与日记设置可以看到我还有一个 `assets` 文件夹，这是因为我每天的日记除了文字，还带有不少图片，有时候还会贴视频，如果没有合理归档这些附件，混在一起就太难维护了。

|             设置项              | 如何设置                                                                                                                                          |
| :-----------------------------: | :------------------------------------------------------------------------------------------------------------------------------------------------ |
|  Location for new attachments   | 我配置了 `Location for new attachments` 为 `../assets/${noteFileName}` ，这样每一篇日记的附件都会归档到 `assets` 文件夹下的 “笔记文件名” 文件夹里 |
| Should rename attachment folder | 如果笔记对应的 Markdown 文件修改了命名，它会监听并重命名这个附件文件夹，虽然我几乎不改，但一旦修改，这个功能确实挺省事的                          |

其他选项可以根据自己需要修改，例如图片自动重命名的一些功能。

![主要设置 Location for new attachments 选项](https://cdn.chengpeiquan.com/img/2025/10/202510072239706.jpg?x-oss-process=image/interlace,1)

### Obsidian 移动设备配置

我的常用移动设备是 iPhone ，所以直接在 App Store 搜索 Obsidian 即可找到客户端下载，也可以在官网找到其他端的下载。

安装好 App 后，在 iPhone 或其他设备上重复上述步骤进行配置。

## 总结

日常写笔记时，我的习惯是只在一端更新，写完后同步回 NAS ，下次在另一台设备启动 Obsidian 时，插件会自动比对版本，从 NAS 拉取最新数据，实现双向同步，这种方式在实际使用中没有出现文件冲突，整体体验非常稳定。

从 2019 年开始在第三方 App 上写日记，到现在用 Obsidian + 飞牛 NAS 搭建私有笔记系统，这 6 年的数据迁移总算告一段落。

这套方案在技术上并不复杂，但在内容管理理念上是一次很大的升级：

- 数据完全自控，还可以在 NAS 上定期备份或迁移
- 所有数据本地均有存档，离线也能完整访问与编辑
- Markdown 格式通用、可扩展，不受笔记客户端约束

经过几个月使用，无论是多端同步、搜索速度还是文件安全，都比以往的云笔记方案更可靠，如果你也希望让笔记系统更可控、更长期可维护，这套组合值得一试。
